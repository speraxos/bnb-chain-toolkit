{
  "ERC-8004 Register Agent (ethers.js)": {
    "prefix": "erc8004-register",
    "body": [
      "import { ethers } from 'ethers';",
      "",
      "const IDENTITY_REGISTRY = '${1:0x8004A818BFB912233c491871b3d84c89A494BD9e}';",
      "const ABI = [",
      "  'function register(string agentURI) external returns (uint256)',",
      "  'function setAgentURI(uint256 agentId, string newURI) external',",
      "  'function tokenURI(uint256 tokenId) external view returns (string)',",
      "  'function ownerOf(uint256 tokenId) external view returns (address)',",
      "  'event Registered(uint256 indexed agentId, string agentURI, address indexed owner)',",
      "];",
      "",
      "async function registerAgent(signer: ethers.Signer, agentURI: string) {",
      "  const contract = new ethers.Contract(IDENTITY_REGISTRY, ABI, signer);",
      "  const tx = await contract.register(agentURI);",
      "  const receipt = await tx.wait();",
      "",
      "  const event = receipt.logs",
      "    .map((log: any) => {",
      "      try { return contract.interface.parseLog(log); } catch { return null; }",
      "    })",
      "    .find((e: any) => e?.name === 'Registered');",
      "",
      "  const agentId = event?.args[0];",
      "  console.log('Registered agent ID:', agentId?.toString());",
      "  return agentId;",
      "}"
    ],
    "description": "Register an ERC-8004 agent using ethers.js"
  },
  "ERC-8004 View Agent (ethers.js)": {
    "prefix": "erc8004-view",
    "body": [
      "import { ethers } from 'ethers';",
      "",
      "const IDENTITY_REGISTRY = '${1:0x8004A818BFB912233c491871b3d84c89A494BD9e}';",
      "const ABI = [",
      "  'function tokenURI(uint256 tokenId) external view returns (string)',",
      "  'function ownerOf(uint256 tokenId) external view returns (address)',",
      "  'function getAgentWallet(uint256 agentId) external view returns (address)',",
      "  'function getMetadata(uint256 agentId, string key) external view returns (bytes)',",
      "];",
      "",
      "async function viewAgent(provider: ethers.Provider, tokenId: number) {",
      "  const contract = new ethers.Contract(IDENTITY_REGISTRY, ABI, provider);",
      "  const [owner, uri, wallet] = await Promise.all([",
      "    contract.ownerOf(tokenId),",
      "    contract.tokenURI(tokenId),",
      "    contract.getAgentWallet(tokenId),",
      "  ]);",
      "",
      "  let metadata = {};",
      "  if (uri.startsWith('data:application/json;base64,')) {",
      "    metadata = JSON.parse(atob(uri.replace('data:application/json;base64,', '')));",
      "  }",
      "",
      "  return { tokenId, owner, uri, wallet, metadata };",
      "}"
    ],
    "description": "View an ERC-8004 agent using ethers.js"
  },
  "ERC-8004 Agent Card JSON": {
    "prefix": "erc8004-agent-card",
    "body": [
      "const agentCard = {",
      "  type: 'https://eips.ethereum.org/EIPS/eip-8004#registration-v1',",
      "  name: '${1:My AI Agent}',",
      "  description: '${2:An autonomous AI agent}',",
      "  image: '${3:https://example.com/avatar.png}',",
      "  services: [",
      "    { name: 'A2A', endpoint: '${4:https://api.example.com/a2a}', version: '0.3.0' },",
      "    { name: 'MCP', endpoint: '${5:https://api.example.com/mcp}', version: '2025-06-18' },",
      "  ],",
      "  x402Support: ${6:false},",
      "  active: true,",
      "  registrations: [",
      "    { agentId: ${7:0}, agentRegistry: 'eip155:97:0x8004A818BFB912233c491871b3d84c89A494BD9e' },",
      "  ],",
      "  supportedTrust: ['reputation'],",
      "};"
    ],
    "description": "ERC-8004 agent card object template"
  }
}
