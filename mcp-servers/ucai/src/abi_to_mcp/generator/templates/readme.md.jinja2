# {{ server_name }} MCP Server

This is an auto-generated MCP (Model Context Protocol) server for interacting with the smart contract at `{{ contract_address }}` on {{ network }}.

## Quick Start

First, install the dependencies:

```bash
pip install -r requirements.txt
```

Then create a `.env` file with your configuration:

```bash
RPC_URL={{ default_rpc }}
CONTRACT_ADDRESS={{ contract_address }}
# PRIVATE_KEY=your-private-key  # Only needed for write operations
```

Run the server:

```bash
python server.py
```

## Using with Claude Desktop

Add this to your `claude_desktop_config.json`:

```json
{
  "mcpServers": {
    "{{ server_name | lower | replace(' ', '-') }}": {
      "command": "python",
      "args": ["{{ output_path | default('/path/to') }}/server.py"],
      "env": {
        "RPC_URL": "{{ default_rpc }}"
      }
    }
  }
}
```

## Available Tools

This server provides {{ tools | length }} tools for interacting with the contract.

### Read Operations

These operations don't require gas and can be called freely:

{% for tool in read_tools %}
**`{{ tool.name }}`** - {{ tool.description }}
{% if tool.parameters %}
Parameters:
{% for param in tool.parameters %}
- `{{ param.name }}` ({{ param.python_type }}): {{ param.description }}
{% endfor %}
{% endif %}

{% endfor %}
{% if not read_tools %}
*No read operations available.*
{% endif %}

### Write Operations

{% if write_tools %}
These operations modify blockchain state and require gas. By default, they run in simulation mode for safety.

{% for tool in write_tools %}
**`{{ tool.name }}`** - {{ tool.description }}
{% if tool.parameters %}
Parameters:
{% for param in tool.parameters %}
- `{{ param.name }}` ({{ param.python_type }}): {{ param.description }}
{% endfor %}
{% endif %}
- `simulate` (bool): Default `True`. Set to `False` to execute for real.

{% endfor %}
{% else %}
*Write operations are disabled (read-only mode).*
{% endif %}

{% if resources %}
## Event Resources

The server also provides access to contract events as MCP resources:

{% for resource in resources %}
**`{{ resource.uri_template }}`** - {{ resource.description }}

Fields:
{% for field in resource.fields %}
- `{{ field.name }}`: {{ field.description }}{% if field.indexed %} (indexed, filterable){% endif %}

{% endfor %}
{% endfor %}
{% endif %}

## Configuration

| Environment Variable | Description | Required |
|---------------------|-------------|----------|
| `RPC_URL` | Web3 RPC endpoint | Yes |
| `CONTRACT_ADDRESS` | Override contract address | No |
| `PRIVATE_KEY` | For write operations | For writes only |

## Security Notes

1. **Private keys** are loaded from environment variables only, never from files or command line.

2. **Write operations simulate by default** - you must explicitly set `simulate=False` to execute real transactions.

3. **Gas estimation** includes a 20% buffer for safety.

4. Consider running in **read-only mode** (`READ_ONLY_MODE=true`) if you don't need write operations.

## Contract Information

- **Address**: `{{ contract_address }}`
- **Network**: {{ network }}
{% if detected_standard %}
- **Standard**: {{ detected_standard }}
{% endif %}
- **Total Tools**: {{ tools | length }} ({{ read_tools | length }} read, {{ write_tools | length }} write)
- **Event Resources**: {{ resources | length }}

## Troubleshooting

**"PRIVATE_KEY environment variable not set"** - You're trying to use a write operation without configuring a private key. Either set `PRIVATE_KEY` in your `.env` file or use `simulate=True`.

**"Transaction reverted"** - The contract rejected the transaction. Check your parameters and ensure you have sufficient balance/allowances.

**"Connection failed"** - Check your `RPC_URL` is correct and the RPC endpoint is accessible.

---

*Generated by [UCAI](https://github.com/nirholas/UCAI)*
